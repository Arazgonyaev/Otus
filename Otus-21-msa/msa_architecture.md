# Компоненты системы

## 1. API Gateway
API-шлюз, принимает запросы от клиентского приложения, 
проверяет валидность JWT-токена по хранимому публичному ключу (получает 
при старте от сервиса авторизации), маршрутизирует запросы в микро-сервисы.

## 2. Authority service
Сервис аутентификации и авторизации, обрабатывает 
команды на регистрацию пользователя и получения токена аутентификации,
получает информацию о пользователях из сервиса пользователей.
### Endpoints
- POST user, [FromBody] User - регистрация пользователя
- POST token, [FromBody] UserCredentials - получение токена аутентификации
- GET jwt-data - получение данных для валидации токена аутентификации (issuer, public key)

## 3. Fight service
Сервис боев, хранит информацию о боях, обрабатывает 
команды на создание боя, просмотр списка завершенных боев пользователя, 
просмотр результатов боя. Получает информацию о пользователях из сервиса 
пользователей, отправляет уведомления о скором начале боя и результатах боя
в очередь нотификации.
### Endpoints
- POST fight, [FromBody] Fight - создание боя
- GET fight - получение списка завершенных боев пользователя
- GET fight/{id} - получение результатов боя

## 4. Tourney service
Сервис турниров, хранит информацию о турнирах, 
обрабатывает команды на создание турнира, просмотр списков активных и 
завершенных турниров, заявки на участие в турнире. Получает информацию о 
боях из сервиса боев, отправляет уведомления о приглашении на турнир и 
решении по заявке на участие в турнире в очередь нотификации. Получает 
инфомрацию о рейтинге участников турнира из сервиса рейтинга.
### Endpoints
- POST tourney, [FromBody] Tourney - создание турнира
- GET tourney/?active:bool - получение списка активных или завершенных турниров
- GET tourney/{id} - получение информации о турнире

## 5. User service
Сервис пользователей, хранит информацию о пользователях. 
Обрабатывает команды на регистрацию пользователя и повышение рейтинга, 
возвращает информацию о пользователях для отображения личного кабинета. 
Получает информацию о рейтинге пользователя и отправляет команды на изменение 
рейтинга в сервис рейтинга. Получает уведомления от сервиса сообщений для 
отображения в личном кабинете.
### Endpoints
- POST user, [FromBody] User - регистрация пользователя
- GET user/{id} - получение информации о пользователе
- PUT user/{id}/rating, [FromBody] UserRating - изменение рейтинга пользователя
- POST user/{id}/message, [FromBody] Message - отправка сообщения в личный кабинет пользователя

## 6. Rating service
Сервис рейтинга, хранит информацию в рейтинге 
пользователей, включая информацию о рейтинге, полученном в рамках турнира. 
Возвращает информацию о рейтинге пользователя, о рейтинге турнира.
### Endpoints
- PUT user-rating/{userId}, [FromBody] UserRating - изменение рейтинга пользователя
- GET user-rating/{userId} - получение рейтинга пользователя
- GET tourney-rating/{tourneyId} - получение рейтинга турнира

## 7. Message service
Сервис сообщений, обрабатывает очередь нотификации, 
получает контактную информацию о пользователях из сервиса пользователей, 
отпраляет сообщения на email и в личный кабинет пользователя, обратившись к
сервису пользователей.
